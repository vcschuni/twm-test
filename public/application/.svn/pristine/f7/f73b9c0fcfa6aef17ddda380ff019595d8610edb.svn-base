<style>
	.le-with-chevron[aria-expanded='true'] span {
		display: block;
		transform: rotate(180deg) !important;
	}
	.le-instructions {
		font-size: 13px;
		font-style: italic;
	}
	.le-instructions ul {
		margin-top: 5px;
		list-style: square inside url('data:image/gif;base64,R0lGODlhBQAKAIABAAAAAP///yH5BAEAAAEALAAAAAAFAAoAAAIIjI+ZwKwPUQEAOw==');
		padding-left: 1.2em;
		list-style-position: outside;
	}
	#le-attribute-form {
		display: none;
		margin: 10px 0 25px 0;
	}
	#le-attribute-form legend {
		float: none;
		font-size: 14px;
		font-weight: bold;
		margin-bottom: 0px;
	}
	#le-feature-action-btn-container {
		position: absolute;
		bottom: 12px;
		z-index: 20;
		width: 100%;
		text-align: center;
	}
	#le-feature-action-btn-container button {
		width: 125px;
	}
	.le-attr-input-changed {
		background-color: pink !important;
	}
	.le-attr-input-label {
		width: 140px;
		white-space:pre-wrap;
		text-align: right;
		align-items: normal;
	}
	#le-digitize-toolbar {
		position: absolute;
		top: 80px;
		right: 5px;
	}
	.le-edit-btn:hover {
		background-color: rgba(0,60,136,0.7);
	}
	@keyframes zoom-in {
		100% {transform: translate(0, 0);}
	}
	@keyframes zoom-out {
		100% {transform: translate(50px, 0);}
	}
	.le-edit-btn-grp {
		border-radius: 4px;
		border: solid;
		border-width: 3px;
		border-color: rgba(255,255,255,0.2);
		background-color: rgba(255,255,255,0.2);
		margin-bottom: 5px;
	}
	.le-edit-btn-grp.in {
		animation: zoom-in 1s;
		animation-timing-function: cubic-bezier(0.075, 1.82, 0.125, 1);
	}
	.le-edit-btn-grp.in:nth-child(3) {
		animation-delay: 200ms;	
	}
	.le-edit-btn-grp.in:nth-child(4) {
		animation-delay: 400ms;	
	}
	.le-edit-btn-grp.in:nth-child(5) {
		animation-delay: 500ms;	
	}
	.le-edit-btn-grp.out {
		animation: zoom-out 500ms;
		animation-timing-function: ease-in-out;
	}
	.le-edit-btn-grp.out:nth-child(3) {
		animation-delay: 200ms;	
	}
	.le-edit-btn-grp.out:nth-child(2) {
		animation-delay: 400ms;	
	}
	.le-edit-btn-grp.hidden {
		transform: translate(50px, 0);
	}
	
	.le-edit-btn.active {
		background-color: rgba(255,85,0,0.5);
	}
	.le-edit-btn {
		pointer-events: fill;
		line-height: 0.4em;
		color: #fff;
		border-radius: 2px;
		background-color: rgba(0,60,136,0.5);
		position: relative;
		border: solid;
		border-width: 2px;
		border-color: rgba(255,255,255,0.4);
		width: 24px;
		height: 24px;
		z-index: 10000000000;
		display: flex;
		justify-content: center;
		align-items: center;
		cursor: pointer;
	}
	@media only screen and (max-width: 768px) {
		.le-edit-btn {
			width: 34px;
			height: 34px;
		}
	}	
	.le-edit-btn.disabled {
		background-color: rgba(0,0,0,0.2);
	}
	.le-edit-btn-img {
		position: absolute;
		width: 22px;
		height: 22px;
		z-index: 10000000000;
	}
	#le-copying-container {
		margin: 30px 0 0 0;
		display: none;
	}
	#le-copying-container .features {
		display: flex;
		font-size: 15px;
		font-weight: 400;
		cursor: pointer;
	}
	#le-copying-container .features i.oi {
		font-size: 12px;
		margin-right: 0.5rem;
	}
	#le-copying-container .number {
		color: white;
	}
	#le-copying-container .title,.number {
		pointer-events: none;
	}
	#le-copying-container .features:hover {
		background-color: aquamarine;
	}
	.le-textarea-surround {
		padding: 3px 6px !important;
	}
	.le-textarea-surround textarea {
		border: none;
		height: 100px;
		width: 100%;
	}
	.le-htmleditor-surround {
		height: unset!important;
		padding: 0px!important;
		border: 0px!important;
	}
	#le-editable-feature-select-count {
		z-index: 5;
	}
	.le-attribute-form-header{
		display: flex;
		justify-content: space-between;
		padding-bottom: 10px;
		margin-top: -5px;
		align-items: center;
	}
	#le-attribute-form-close-button{
		width: .4em;
    	height: .4em;
	}
	
	#le-comment-input-container{
		margin-top: -45px;
    	margin-left: 140px;
		font-size: .875rem;
	}
	#le-add-comment{
		margin-left: 140px;
		font-size: .875rem;
	}
	#le-comment-entry{
		width: auto;
    	margin-left: 140px;
		font-size: .875rem;
		resize: none; /* Prevent manual resizing */
		overflow: hidden; /* Hide overflow */
	}
	#le-add-feature-btn{
		margin-top: 10px;
	}




</style>

<script>
	// Automatically adjust the height of the comment entry box
	document.addEventListener('input', function (event) {
		if (event.target.id === 'le-comment-entry') {
			event.target.style.height = 'auto'; // Reset height
			event.target.style.height = event.target.scrollHeight + 'px'; // Adjust to content
		}
	});
</script>

<!-- Instructions -->
<div class="mb-3">
	<a tabindex="-1" data-bs-toggle="collapse" id="le-instructions-btn" href="#le-intructions-panel" role="button" aria-expanded="false" aria-controls="le-intructions-panel" class="btn btn-sm btn-light btn-block col-12 shadow-sm le-with-chevron">
		<p class="d-flex align-items-center justify-content-between mb-0">Instructions<span class="oi oi-chevron-bottom"></span></p>
	</a>
	<div id="le-intructions-panel" class="collapse shadow-sm">
		<div class="card">
			<div class="card-body le-instructions">
				<b>To edit a layer:</b>
				<ul>
					<li>Select an 'Editable layer' from the dropdown</li>
					<li>Use the editing tools that appear on the right of the map to add, edit, and delete features</li>

				</ul>
				
				<b>Hints:</b>
				<ul>
					<!-- <li>Hold down the Ctrl key (Cmd key on a Mac) with the Copy Feature tool to draw a box for selecting multiple features to copy</li> -->
					<!-- <li>Hold down the Shift key with the Modify Feature tool to select multiple features to editâ€”this preserves topology for adjacent features, such as property boundaries</li> -->
					<li>Hold down the Shift key when drawing lines or polygons for free-hand drawing, rather than clicking vertices</li>
					<li>Alt key + Click when modifying a line or polygon to remove a vertex</li>
				</ul>
			</div>
		</div>
	</div>
</div>

<!-- Editable Layer Selector -->
<div class="input-group input-group-sm mb-3" id="le-editable-layer-input-group">
	<span class="input-group-text">Editable Layer</span>
	<select id="le-editable-layer-select" class="form-select form-select-sm"></select>
</div>

<ul id="le-copying-container" class="list-group"></ul>

<!-- Editable Feature Selector -->
<div class="input-group input-group-sm mb-1" style="display:none;" id="le-editable-feature-input-group">
	<span class="input-group-text">Editable Feature</span>
	<input type="text" id="le-editable-feature-input" class="form-control form-control-sm" placeholder="Search...">
	<select id="le-editable-feature-select" class="form-select form-select-sm"></select>
	<span id="le-editable-feature-select-count" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-warning text-dark"></span>
</div>

<button id="le-add-feature-btn" class="btn btn-sm btn-success" type="button" style="display:none;" title="Add new record">Create New Record</button>


<!-- Attribute Editing Form -->
<fieldset id="le-attribute-form" class="border p-2" style="display:none;">
	<div class="le-attribute-form-header">
		<legend class="w-auto">Feature Attributes</legend>
		
		<div class="le-attribute-form-header-buttons">
			<button id="le-zoom-to-button" type="button" class="btn btn-light btn-sm" title="Zoom to Feature" style="width: 40px; height: 40px;">
				<span class="oi oi-magnifying-glass"></span>
			</button>
			<button id="le-email-button" type="button" class="btn btn-light btn-sm" title="Send Email" style="width: 40px; height: 40px; display: none;">
				<span class="oi oi-envelope-open"></span>
			</button>
			<button id="le-delete-button" type="button" class="btn btn-light btn-sm" title="Delete a Feature" style="width: 40px; height: 40px; display: none;">
				<span class="oi oi-trash"></span>
			</button>
			<button id="le-attribute-form-close-button" type="button" class="btn btn-light btn-sm" title="Close" style="width: 40px; height: 40px;">
				<span class="oi oi-x"></span>
			</button>
		</div>
		
	</div>

	<!-- Inputs will be added here dynamically -->
</fieldset>

<!-- Attribute Input Template - Text (hidden) -->
<div class="input-group input-group-sm mb-1 le-attr-input-div le-attr-input-template-text" style="display:none;">
	<span class="input-group-text border-0 bg-transparent justify-content-end le-attr-input-label"></span>
	<input type="text" class="le-form-input form-control" />
</div>

<!-- Attribute Input Template - Text Area (hidden) -->
<div class="input-group input-group-sm mb-1 le-attr-input-div le-attr-input-template-textarea" style="display:none;">
	<span class="input-group-text border-0 bg-transparent justify-content-end le-attr-input-label"></span>
	<div class="le-textarea-surround form-control">
		<textarea class="le-form-input"></textarea>
	</div>
</div>

<!-- Attribute Input Template - HTML Editor (hidden) -->
<div class="input-group input-group-sm mb-1 le-attr-input-div le-attr-input-template-htmleditor" style="display:none;">
	<span class="input-group-text border-0 bg-transparent justify-content-end le-attr-input-label"></span>
	<div class="le-htmleditor-surround form-control">
		<textarea class="le-form-input"></textarea>
	</div>
</div>

<!-- Attribute Input Template - Option (hidden) -->
<div class="input-group input-group-sm mb-1 le-attr-input-div le-attr-input-template-option" style="display:none;">
	<span class="input-group-text border-0 bg-transparent justify-content-end le-attr-input-label"></span>
	<select class="le-form-input form-select form-select-sm"></select>
</div>

<!-- Attribute Input Template - Number (hidden) -->
<div class="input-group input-group-sm mb-1 le-attr-input-div le-attr-input-template-number" style="display:none;">
	<span class="input-group-text border-0 bg-transparent justify-content-end le-attr-input-label"></span>
	<input type="number" class="le-form-input form-control" />
</div>

<!-- Attribute Input Template - Comment Input (hidden) -->
<div class="input-group input-group-sm mb-1 le-attr-input-div le-attr-input-template-comment-input" style="display:none;">
    <span class="input-group-text border-0 bg-transparent justify-content-end le-attr-input-label"></span>
    <div class="d-flex flex-column w-100">
        <div class="le-comment-display le-attr-input-div mb-1" id="le-comment-input-container"></div>
        <div class="le-comment-entry-container"></div>
		<textarea class="form-control mb-1" autocomplete="off" id="le-comment-entry" placeholder="Enter comment"></textarea>
        <button class="btn btn-primary btn-sm le-add-comment" id="le-add-comment" style="margin-bottom: 10px;">Add</button>
    </div>
</div>

<!-- Attribute Input Template - Date & Time (hidden) -->
<div class="input-group input-group-sm mb-1 le-attr-input-div le-attr-input-template-datetime" style="display:none;">
	<span class="input-group-text border-0 bg-transparent justify-content-end le-attr-input-label"></span>
	<input type="datetime-local" class="le-form-input form-control" />
</div>

<!-- Attribute Input Template - Date Only -->
<div class="input-group input-group-sm mb-1 le-attr-input-div le-attr-input-template-date" style="display:none;">
	<span class="input-group-text border-0 bg-transparent justify-content-end le-attr-input-label"></span>
	<input type="date" class="le-form-input form-control" />
</div>



<!-- Editor Toolbar -->
<div id="le-digitize-toolbar">

	<div id="le-digitize-toolbar-add-geometry" class='le-edit-btn-grp hide hidden out'>
		<div class='le-edit-btn' data-action='point' style='margin-bottom:1px;' title='Add a Point'>
			<img class='le-edit-btn-img' src="application/plugins/LayerEditor/img/icons-v3/tabler--point-filled.svg">
		</div>
		<div class='le-edit-btn' data-action='linestring' style='margin-bottom:1px;' title='Add a Line'>
			<img class='le-edit-btn-img' src="application/plugins/LayerEditor/img/icons-v2/line-icon.svg">
		</div>
		<div class='le-edit-btn' data-action='polygon' title='Add a Polygon'>
			<img class='le-edit-btn-img' src="application/plugins/LayerEditor/img/icons-v3/tabler--polygon.svg">
		</div>
	</div>

	<div id="le-digitize-toolbar-modify" class='le-edit-btn-grp hide hidden out'>
		<div class='le-edit-btn' data-action='modify' style='margin-bottom:1px;' title='Select/Modify a Feature'>
			<img class='le-edit-btn-img' src="application/plugins/LayerEditor/img/icons-v3/tabler--edit.svg">
		</div>
		<div class='le-edit-btn' data-action='delete' title='Delete a Feature'>
			<img class='le-edit-btn-img' src="application/plugins/LayerEditor/img/icons-v2/delete-icon2.svg">
		</div>
	</div>

	<div id="le-digitize-toolbar-functions" class='le-edit-btn-grp hide hidden out'>
		<div class='le-edit-btn' data-action='copy' style='margin-bottom:1px;' title='Copy a Feature'>
			<img class='le-edit-btn-img' src="application/plugins/LayerEditor/img/copy-paste-2.svg">
		</div>
		<div class='le-edit-btn' data-action='snap' title='Snapping to features on map'>
			<img class='le-edit-btn-img' src="application/plugins/LayerEditor/img/snapping-2.svg">
		</div>
	</div>
	
</div>

<!-- Save/discard changes buttons -->
<div id="le-feature-action-btn-container" class="gap-2">
	<button id="le-discard-changes-btn" class="btn btn-sm btn-warning" type="button" style="display:none;">Discard Changes</button>
	<button id="le-save-changes-btn" class="btn btn-sm btn-success" type="button" style="display:none;">Save Changes</button>
	<button id="le-delete-features-btn" class="btn btn-sm btn-danger" type="button" style="display:none;">Delete Features</button>
	<button id="le-canceldelete-features-btn" class="btn btn-sm btn-warning" type="button" style="display:none;">Cancel</button>
</div>

